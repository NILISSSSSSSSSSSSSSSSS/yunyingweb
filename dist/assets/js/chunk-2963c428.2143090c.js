(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2963c428"],{"07e7":function(t,a,e){"use strict";var n=e("a3be"),o=e("c7e8");function i(t,a){return o["a"].Get(n["a"].getDefaultShop,t,a)}function r(t,a){return o["a"].Get(n["a"].getShops,t,a)}function s(t,a){return o["a"].Get(n["a"].getMerchant,t,a)}function u(t,a){return o["a"].Post(n["a"].addMerchant,t,a)}function c(t,a){return o["a"].Put(n["a"].editMerchant,t,a)}function l(t,a){return o["a"].Put(n["a"].changeMerchantStu,t,a)}function d(t,a){return o["a"].Get2(n["a"].dzClass,t,a)}function p(t,a){return o["a"].Get2(n["a"].editMerchant,t,a)}function h(t,a){return o["a"].Post(n["a"].addWxInfo,t,a)}function f(t,a){return o["a"].Put(n["a"].setWxInfo,t,a)}function g(t,a){return o["a"].Get2(n["a"].getWxInfoBydz,t,a)}function m(t,a){return o["a"].Put(n["a"].setWxInfo,t,a)}function b(t,a){return o["a"].Put(n["a"].setWxInfoKey,t,a)}function v(t,a){return o["a"].Post(n["a"].setMiniProgram,t,a)}function w(t,a){return o["a"].Get(n["a"].getGroup,t,a)}function P(t,a){return o["a"].Post(n["a"].addGroup,t,a)}function y(t,a){return o["a"].Put(n["a"].editGroup,t,a)}function S(t,a){return o["a"].Get2(n["a"].editGroup,t,a)}function x(t,a){return o["a"].Del(n["a"].editGroup,t,a)}a["a"]={getDefaultShop:i,getShops:r,getMerchant:s,addMerchant:u,editMerchant:c,changeMerchantStu:l,dzClass:d,getMerchantInfo:p,getFwhXcxInfo:g,setWxInfo:h,updateWxInfo:f,setMiniProgram:v,setWxInfoKey:b,getWxInfo:m,getGroup:w,addGroup:P,editGroup:y,searchShopsByGroupId:S,changeGroupStu:x}},"7c2f":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-card",{staticClass:"mb20"},[e("el-form",{attrs:{model:t.searchParams,inline:"",labelWidth:"80px"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-form-item",{attrs:{label:"组名称"}},[e("el-input",{attrs:{placeholder:"组名称",clearable:""},model:{value:t.searchParams.name,callback:function(a){t.$set(t.searchParams,"name","string"===typeof a?a.trim():a)},expression:"searchParams.name"}})],1),e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchList}},[t._v("搜索")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(a){return t.showEdit(1)}}},[t._v("新增组")])],1)],1),e("el-card",[e("el-table",{attrs:{data:t.dataList,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"name",label:"组名称",align:"center"}}),e("el-table-column",{attrs:{prop:"shopNum",label:"门店数量",align:"center"}}),e("el-table-column",{attrs:{prop:"createT.humanTime",label:"创建时间",align:"center"}}),e("el-table-column",{attrs:{label:"操作",width:"350px",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.showEdit(0,n)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.showShops(n)}}},[t._v("门店列表")]),e("el-button",{attrs:{type:"text"},on:{click:function(a){return t.deleteRow(n)}}},[t._v("删除")])]}}])})],1),e("pagination",{attrs:{pageLimit:t.page},on:{change:t.pageChange}}),e("addGroup",{attrs:{dialogData:t.dialogData},on:{close:t.closeGroup}})],1),e("el-dialog",{attrs:{visible:t.isShowShop,title:"门店列表",width:"1200px"},on:{"update:visible":function(a){t.isShowShop=a}}},[e("el-table",{attrs:{data:t.shopList,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"phone",label:"店主电话",align:"center"}}),e("el-table-column",{attrs:{prop:"userName",label:"姓名",align:"center"}}),e("el-table-column",{attrs:{prop:"shopName",label:"店铺名",align:"center"}}),e("el-table-column",{attrs:{prop:"group.name",label:"所属组",align:"center"}}),e("el-table-column",{attrs:{prop:"id",label:"地区",align:"center",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[e("span",[t._v(t._s(n.address?n.address.province+n.address.city+n.address.district+n.address.addr:""))])]}}])}),e("el-table-column",{attrs:{prop:"heHuoRen.name",label:"合伙人",align:"center"}}),e("el-table-column",{attrs:{prop:"createT.humanTime",label:"创建时间",align:"center",width:"170px"}})],1),e("pagination",{attrs:{pageLimit:t.shopPage},on:{change:t.pageChange2}})],1)],1)},o=[],i=(e("cc57"),e("f621")),r=e("07e7"),s={components:{addGroup:i["a"]},data:function(){return{searchParams:{name:""},dataList:[],shopList:[],dialogData:{isShow:!1,isEdit:!1,data:{id:"",name:""}},page:{pageSize:10,pageNumber:1,total:0},isShowShop:!1,nowGroupId:"",shopPage:{pageSize:10,pageNumber:1,total:0}}},methods:{searchList:function(){var t=this,a={name:this.searchParams.name,page:this.page.pageNumber,size:this.page.pageSize};r["a"].getGroup(a,{}).then((function(a){200===a.code&&(t.dataList=[],t.dataList=a.data.data,t.page.total=a.data.total)}))},showEdit:function(t,a){t||(this.dialogData.isEdit=!0,this.dialogData.data={id:a.id,name:a.name}),this.dialogData.isShow=!0},closeGroup:function(t){t&&(this.dialogData={isShow:!1,isEdit:!1,data:{id:"",name:""}},this.searchList())},showShops:function(t){if(!t.shopNum)return this.$message.warning("该组下暂无门店"),!1;this.nowGroupId=t.id,this.searchShops()},searchShops:function(){var t=this,a={queryParam:this.nowGroupId,page:this.shopPage.pageNumber,size:this.shopPage.pageSize};r["a"].searchShopsByGroupId(a,{}).then((function(a){200===a.code&&(t.shopList=a.data.data,t.shopPage.total=a.data.total,t.isShowShop=!0)}))},deleteRow:function(t){var a=this,e=t.shopNum?"该分组下有".concat(t.shopNum,"个店主，请先停用店主"):"确定删除分组？",n=t.shopNum?"我知道了":"确定";this.$confirm(e,"提示",{confirmButtonText:n,cancelButtonText:"取消",type:"warning"}).then((function(){t.shopNum?a.$message.info("你需要先去停用该分组下的店主才可删除分组"):r["a"].changeGroupStu({queryParam:t.id}).then((function(t){200===t.code&&(a.$message.success(t.msg||"操作成功"),a.searchList())}))})).catch((function(){a.$message.info("已取消")}))},pageChange:function(t,a){this.page.pageSize=t,this.page.pageNumber=a,this.searchList()},pageChange2:function(t,a){this.shopPage.pageSize=t,this.shopPage.pageNumber=a,this.searchShops()}},mounted:function(){this.searchList()}},u=s,c=e("5511"),l=Object(c["a"])(u,n,o,!1,null,"6df51c19",null);a["default"]=l.exports},c7e8:function(t,a,e){"use strict";var n=e("a59a");function o(t,a,e){if(a){var o="?";for(var i in a)o=o+i+"="+a[i]+"&";return o=o.substr(0,o.length-1),e&&0==e.loading?new Promise((function(a,e){n["default"].prototype.$ajax.get(t+o,{loading:!1}).then((function(t){a(t.data)}),(function(t){e(t)}))})):new Promise((function(a,e){n["default"].prototype.$ajax.get(t+o).then((function(t){a(t.data)}),(function(t){e(t)}))}))}return new Promise((function(a,e){n["default"].prototype.$ajax.get(t).then((function(t){a(t.data)}),(function(t){e(t)}))}))}function i(t,a,e){return e&&0==e.loading?new Promise((function(e,o){n["default"].prototype.$ajax.get(t+a.queryParam,{params:a},{loading:!1}).then((function(t){e(t.data)}),(function(t){o(t)}))})):new Promise((function(e,o){n["default"].prototype.$ajax.get(t+a.queryParam,{params:a}).then((function(t){e(t.data)}),(function(t){o(t)}))}))}function r(t,a,e){return e&&0==e.loading?new Promise((function(e,o){n["default"].prototype.$ajax.post(t,a,{loading:!1}).then((function(t){e(t.data)})).catch((function(t){o(t.data)}))})):new Promise((function(e,o){n["default"].prototype.$ajax.post(t,a).then((function(t){e(t.data)})).catch((function(t){o(t.data)}))}))}function s(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;return e&&e.loading,new Promise((function(e,o){n["default"].prototype.$ajax.put(t+a.queryParam,a).then((function(t){e(t.data)}),(function(t){o(t)}))}))}function u(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;if(a){var o="";for(var i in a)o=o+a[i]+"/";return o=o.substring(0,o.length-1),e&&e.loading,new Promise((function(e,i){n["default"].prototype.$ajax.put(t+o,a).then((function(t){e(t.data)}),(function(t){i(t)}))}))}}function c(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;return e&&e.loading,new Promise((function(e,o){n["default"].prototype.$ajax.delete(t+a.queryParam,{data:a}).then((function(t){e(t.data)})).catch((function(t){o(t.data)}))}))}a["a"]={Get:o,Get2:i,Post:r,Put:s,Put2:u,Del:c}},f621:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-dialog",{attrs:{visible:t.dialogData.isShow,title:(t.dialogData.isEdit?"编辑":"新增")+"组","close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(a){return t.$set(t.dialogData,"isShow",a)}}},[e("el-form",{attrs:{inline:"",labelWidth:"100px"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-form-item",{attrs:{label:"组名称"}},[e("el-input",{attrs:{placeholder:"组名称"},model:{value:t.name,callback:function(a){t.name="string"===typeof a?a.trim():a},expression:"name"}})],1),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("提交")])],1)],1)],1)},o=[],i=(e("cc57"),e("07e7")),r={name:"addGroup",props:{dialogData:{type:Object,default:{isShow:!1,isEdit:!1,data:{id:"",name:""}}}},data:function(){return{name:""}},methods:{save:function(){var t=this;if(!this.name.length)return this.$message.error("组名称必填！"),!1;var a={name:this.name};""!==this.dialogData.data.id?(a.queryParam=this.dialogData.data.id,i["a"].editGroup(a).then((function(a){200===a.code&&t.$message.success(a.msg||"编辑成功")}))):i["a"].addGroup(a).then((function(a){200===a.code&&t.$message.success(a.msg||"新增成功")})),this.$emit("close",!0)}},mounted:function(){},watch:{"dialogData.isShow":function(t){t?(this.dialogData.isEdit=!0,this.name=this.dialogData.data.name):(this.dialogData.isEdit=!1,this.dialogData.data={id:"",name:""})}}},s=r,u=e("5511"),c=Object(u["a"])(s,n,o,!1,null,"7c868fd5",null);a["a"]=c.exports}}]);