(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-daec3994"],{"289c":function(t,a,e){"use strict";function r(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}e.d(a,"a",(function(){return r}))},"4ba2":function(t,a,e){var r=e("2ea2"),s=e("2f77"),n=e("69b3"),o=e("e7ad").Reflect;t.exports=o&&o.ownKeys||function(t){var a=r.f(n(t)),e=s.f;return e?a.concat(e(t)):a}},"5ab2":function(t,a,e){var r=e("e46b"),s=e("4ba2"),n=e("09b9"),o=e("dcb7"),i=e("ebc3");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var a,e,r=n(t),l=o.f,c=s(r),u={},m=0;while(c.length>m)e=l(r,a=c[m++]),void 0!==e&&i(u,a,e);return u}})},"5bd4":function(t,a,e){"use strict";var r=e("a3be"),s=e("c7e8");function n(t,a){return s["a"].Post(r["a"].loginByPwd,t,a)}function o(t,a){return s["a"].Post(r["a"].changePwd,t,a)}function i(t,a){return s["a"].Get(r["a"].getUserRoles,t,a)}function l(t,a){return s["a"].Get(r["a"].getAllRoles,t,a)}a["a"]={pwdLogin:n,getUserRoles:i,changePwd:o,getAllRoles:l}},c7e8:function(t,a,e){"use strict";var r=e("a59a");function s(t,a,e){if(a){var s="?";for(var n in a)s=s+n+"="+a[n]+"&";return s=s.substr(0,s.length-1),e&&0==e.loading?new Promise((function(a,e){r["default"].prototype.$ajax.get(t+s,{loading:!1}).then((function(t){a(t.data)}),(function(t){e(t)}))})):new Promise((function(a,e){r["default"].prototype.$ajax.get(t+s).then((function(t){a(t.data)}),(function(t){e(t)}))}))}return new Promise((function(a,e){r["default"].prototype.$ajax.get(t).then((function(t){a(t.data)}),(function(t){e(t)}))}))}function n(t,a,e){return e&&0==e.loading?new Promise((function(e,s){r["default"].prototype.$ajax.get(t+a.queryParam,{params:a},{loading:!1}).then((function(t){e(t.data)}),(function(t){s(t)}))})):new Promise((function(e,s){r["default"].prototype.$ajax.get(t+a.queryParam,{params:a}).then((function(t){e(t.data)}),(function(t){s(t)}))}))}function o(t,a,e){return e&&0==e.loading?new Promise((function(e,s){r["default"].prototype.$ajax.post(t,a,{loading:!1}).then((function(t){e(t.data)})).catch((function(t){s(t.data)}))})):new Promise((function(e,s){r["default"].prototype.$ajax.post(t,a).then((function(t){e(t.data)})).catch((function(t){s(t.data)}))}))}function i(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;return e&&e.loading,new Promise((function(e,s){r["default"].prototype.$ajax.put(t+a.queryParam,a).then((function(t){e(t.data)}),(function(t){s(t)}))}))}function l(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;if(a){var s="";for(var n in a)s=s+a[n]+"/";return s=s.substring(0,s.length-1),e&&e.loading,new Promise((function(e,n){r["default"].prototype.$ajax.put(t+s,a).then((function(t){e(t.data)}),(function(t){n(t)}))}))}}function c(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;return e&&e.loading,new Promise((function(e,s){r["default"].prototype.$ajax.delete(t+a.queryParam,{data:a}).then((function(t){e(t.data)})).catch((function(t){s(t.data)}))}))}a["a"]={Get:s,Get2:n,Post:o,Put:i,Put2:l,Del:c}},d0dba:function(t,a,e){"use strict";var r=e("a59a"),s=e("a3be"),n=e("c7e8");function o(t,a){return n["a"].Get(s["a"].getSpecia,t,{loading:!1})}function i(t,a){return n["a"].Post(s["a"].addSpecia,t,a)}function l(t,a){return n["a"].Put(s["a"].editSpecia,t,a)}function c(t,a){return n["a"].Put(s["a"].changeSpeciaStu,t,a)}function u(t,a){return n["a"].Get(s["a"].getBaseData,t,a)}function m(t,a){return n["a"].Get(s["a"].getLineData,t,a)}function f(t,a){return n["a"].Get(s["a"].getShopTopData,t,a)}function p(t,a){return n["a"].Get(s["a"].getCourseTopData,t,a)}function d(t,a){return new Promise((function(e,n){r["default"].prototype.$ajax.post(s["a"].newImUser,t,a).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function h(t,a){return new Promise((function(e,n){r["default"].prototype.$ajax.post(s["a"].getUserSign,t,a).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}a["a"]={getSpecia:o,addSpecia:i,editSpecia:l,changeSpeciaStu:c,getBaseData:u,getLineData:m,getShopTopData:f,getCourseTopData:p,newImUser:d,getUserSign:h}},ebc3:function(t,a,e){"use strict";var r=e("064e"),s=e("cc33");t.exports=function(t,a,e){a in t?r.f(t,a,s(0,e)):t[a]=e}},f07e:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-card",{staticClass:"mb20"},[e("el-form",{attrs:{model:t.searchParams,inline:"",labelWidth:"80px"}},[e("el-form-item",{attrs:{label:"姓名"}},[e("el-input",{attrs:{placeholder:"姓名",clearable:""},model:{value:t.searchParams.name,callback:function(a){t.$set(t.searchParams,"name","string"===typeof a?a.trim():a)},expression:"searchParams.name"}})],1),e("el-form-item",{attrs:{label:"电话"}},[e("el-input",{attrs:{placeholder:"电话",clearable:""},model:{value:t.searchParams.phone,callback:function(a){t.$set(t.searchParams,"phone","string"===typeof a?a.trim():a)},expression:"searchParams.phone"}})],1),e("el-form-item",{attrs:{label:"单位"}},[e("el-input",{attrs:{placeholder:"单位",clearable:""},model:{value:t.searchParams.company,callback:function(a){t.$set(t.searchParams,"company","string"===typeof a?a.trim():a)},expression:"searchParams.company"}})],1),e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchList}},[t._v("搜索")]),e("el-button",{attrs:{type:"info",icon:"el-icon-s-tools"},on:{click:t.reset}},[t._v("重置")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(a){return t.showDialog(1)}}},[t._v("新增专家")])],1)],1),e("el-card",[e("el-table",{attrs:{data:t.dataList,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"id",label:"ID",align:"center","min-width":"150px"}}),e("el-table-column",{attrs:{label:"头像",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.row;return[r.avatar?e("img",{staticStyle:{"max-height":"55px","max-width":"55px"},attrs:{src:r.avatar,alt:r.name}}):t._e()]}}])}),e("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),e("el-table-column",{attrs:{prop:"phone",label:"电话",align:"center"}}),e("el-table-column",{attrs:{prop:"company",label:"单位",align:"center"}}),e("el-table-column",{attrs:{prop:"department",label:"科室",align:"center"}}),e("el-table-column",{attrs:{prop:"title",label:"职称",align:"center"}}),e("el-table-column",{attrs:{prop:"playNum",label:"播课次数",align:"center"}}),e("el-table-column",{attrs:{prop:"createT.humanTime",label:"创建时间",width:"170px",align:"center"}}),e("el-table-column",{attrs:{prop:"active",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.row;return[e("span",{class:1===r.useStatus?"col-sucs":"col-danger"},[t._v(t._s(1===r.useStatus?"启用":"停用"))])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"150px",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.row;return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.showDetail(r)}}},[t._v("查看详情")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.showDialog(r)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.changeStatus(r)}}},[t._v(t._s(1===r.useStatus?"停用":"启用"))])]}}])})],1),e("pagination",{attrs:{pageLimit:t.page},on:{change:t.pageChange}})],1),e("el-dialog",{attrs:{visible:t.isShowDialog,title:t.dialogTitle,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(a){t.isShowDialog=a}}},[e("el-form",{ref:"formParams",attrs:{model:t.formParams,labelWidth:"80px"}},[e("el-form-item",{attrs:{label:"角色"}},[e("el-select",{attrs:{disabled:"",clearable:""},model:{value:t.formParams.roleIds,callback:function(a){t.$set(t.formParams,"roleIds",a)},expression:"formParams.roleIds"}},t._l(t.rolesList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{prop:"name",rules:t.rules,label:"姓名"}},[e("el-input",{attrs:{placeholder:"姓名",clearable:""},model:{value:t.formParams.name,callback:function(a){t.$set(t.formParams,"name","string"===typeof a?a.trim():a)},expression:"formParams.name"}})],1),e("el-form-item",{attrs:{prop:"phone",rules:t.rules,label:"电话"}},[e("el-input",{attrs:{placeholder:"电话",clearable:""},model:{value:t.formParams.phone,callback:function(a){t.$set(t.formParams,"phone","string"===typeof a?a.trim():a)},expression:"formParams.phone"}})],1),e("el-form-item",{attrs:{label:"头像"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.formParams.avatar?e("img",{staticClass:"avatar",attrs:{src:t.formParams.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e("span",{staticClass:"tips lh22"},[t._v("点击头像可重新上传您的头像")])],1),e("el-form-item",{attrs:{label:"单位"}},[e("el-input",{attrs:{placeholder:"单位",clearable:""},model:{value:t.formParams.company,callback:function(a){t.$set(t.formParams,"company","string"===typeof a?a.trim():a)},expression:"formParams.company"}})],1),e("el-form-item",{attrs:{label:"部门"}},[e("el-input",{attrs:{placeholder:"部门",clearable:""},model:{value:t.formParams.department,callback:function(a){t.$set(t.formParams,"department","string"===typeof a?a.trim():a)},expression:"formParams.department"}})],1),e("el-form-item",{attrs:{label:"职称"}},[e("el-input",{attrs:{placeholder:"职称",clearable:""},model:{value:t.formParams.title,callback:function(a){t.$set(t.formParams,"title","string"===typeof a?a.trim():a)},expression:"formParams.title"}})],1),e("el-row",{staticClass:"tc"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.save}},[t._v("保存")])],1)],1)],1),e("el-dialog",{attrs:{visible:t.isShowDetail,title:"专家详情",width:"500px","close-on-click-modal":!1},on:{"update:visible":function(a){t.isShowDetail=a}}},[e("el-form",{staticClass:"small-form",attrs:{model:t.formParams,labelWidth:"80px"}},[e("el-form-item",{attrs:{label:"角色："}},[e("span",[t._v("专家")])]),e("el-form-item",{attrs:{label:"姓名："}},[e("span",[t._v(t._s(t.formParams.name))])]),e("el-form-item",{attrs:{label:"电话："}},[e("span",[t._v(t._s(t.formParams.phone))])]),e("el-form-item",{attrs:{label:"头像："}},[e("img",{staticClass:"avatar",attrs:{src:t.formParams.avatar}})]),e("el-form-item",{attrs:{label:"单位："}},[e("span",[t._v(t._s(t.formParams.company))])]),e("el-form-item",{attrs:{label:"部门："}},[e("span",[t._v(t._s(t.formParams.department))])]),e("el-form-item",{attrs:{label:"职称："}},[e("span",[t._v(t._s(t.formParams.title))])]),e("el-row",{staticClass:"tc"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-close"},on:{click:function(a){t.isShowDetail=!1}}},[t._v("关闭")])],1)],1)],1),e("el-dialog",{attrs:{visible:t.isShowChange,title:t.statuTitle,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(a){t.isShowChange=a}}},[e("el-form",{staticClass:"small-form",attrs:{model:t.statuParams,labelWidth:"100px"}},[e("el-form-item",{attrs:{label:"停用原因："}},[e("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.statuParams.reason,callback:function(a){t.$set(t.statuParams,"reason","string"===typeof a?a.trim():a)},expression:"statuParams.reason"}})],1),e("el-form-item",{attrs:{label:"截止日期："}},[e("el-date-picker",{attrs:{"picker-options":t.pickerOptions,type:"date",size:"small"},model:{value:t.statuParams.t,callback:function(a){t.$set(t.statuParams,"t","string"===typeof a?a.trim():a)},expression:"statuParams.t"}}),e("div",{staticClass:"tips"},[t._v("不传时间将默认停用一年")])],1),e("el-form-item",{attrs:{label:"强制停用："}},[e("el-radio-group",{model:{value:t.statuParams.force,callback:function(a){t.$set(t.statuParams,"force",t._n(a))},expression:"statuParams.force"}},[e("el-radio",{attrs:{label:0}},[t._v("是")]),e("el-radio",{attrs:{label:1}},[t._v("否")])],1)],1),e("el-form-item",{attrs:{label:"封禁账号："}},[e("el-radio-group",{model:{value:t.statuParams.ban,callback:function(a){t.$set(t.statuParams,"ban",t._n(a))},expression:"statuParams.ban"}},[e("el-radio",{attrs:{label:0}},[t._v("是")]),e("el-radio",{attrs:{label:1}},[t._v("否")])],1)],1),e("el-row",{staticClass:"tc"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.changeStatu}},[t._v("提交")])],1)],1)],1)],1)},s=[],n=(e("5ab2"),e("6d57"),e("e10e"),e("cc57"),e("289c")),o=e("d0dba"),i=e("5bd4"),l=e("a3be");function c(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,r)}return e}function u(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?c(Object(e),!0).forEach((function(a){Object(n["a"])(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var m={data:function(){return{uploadUrl:l["a"].ossUpload||"",searchParams:{},formParams:{avatar:"https://xiaochengxu-dev.oss-cn-beijing.aliyuncs.com/202002/5e4a67c502643571c95f276f.jpeg"},statuParams:{userId:"",t:"",useStatus:1,force:1,ban:1},dataList:[],isShowDialog:!1,isShowDetail:!1,statuTitle:"",isShowChange:!1,nowUserId:"",id:"",isEdit:!1,rolesList:[],dialogTitle:"新增专家",imageUrl:"",rules:[{required:!0,message:"必填",triiger:"blur,change"}],pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()-(864e5-1)}},page:{pageSize:10,pageNumber:1,total:0}}},methods:{searchList:function(){var t=this,a=u({},this.searchParams,{isall:!0,page:this.page.pageNumber,size:this.page.pageSize});o["a"].getSpecia(a,{loading:!0}).then((function(a){200===a.code&&(t.dataList=a.data.data,t.page.total=a.data.total)}))},save:function(){var t=this;this.$refs["formParams"].validate((function(a){if(!a)return!1;if(!t.$utils.PHONE_REG.test(t.formParams.phone))return t.$message.error("手机号格式不正确"),!1;var e={roleIds:[t.formParams.roleIds],phone:t.formParams.phone,name:t.formParams.name,avatar:t.formParams.avatar,company:t.formParams.company,department:t.formParams.department,title:t.formParams.title};t.isEdit?(e.queryParam=t.formParams.id,o["a"].editSpecia(e).then((function(a){200===a.code&&(t.$message.success(a.msg||"编辑成功"),t.isShowDialog=!1,t.resetEdit(),t.searchList())}))):o["a"].addSpecia(e).then((function(a){200===a.code&&(t.$message.success(a.msg||"新增成功"),t.isShowDialog=!1,t.resetEdit(),t.searchList())}))}))},showDialog:function(t){if(this.isShowDialog=!0,this.resetEdit(),this.getRoles(),1===t)this.dialogTitle="新增专家",this.isEdit=!1;else{this.dialogTitle="编辑专家",this.isEdit=!0;var a=this.formParams.roleIds;this.formParams=u({},t),this.formParams.roleIds=a}},showDetail:function(t){this.formParams=t,this.isShowDetail=!0},changeStatus:function(t){this.nowUserId=t.userId,this.id=t.id;var a={};2===t.useStatus?(a={queryParam:t.id,userId:this.nowUserId,useStatus:1,force:!1,ban:!1},this.changeStatu(a)):(this.isShowChange=!0,this.statuTitle="停用专家【"+t.name+"】")},changeStatu:function(t){var a=this;if(this.isShowChange){var e=this.statuParams.t?this.$utils.formatEndTime(this.statuParams.t):null;t={queryParam:this.id,userId:this.nowUserId,reason:this.statuParams.reason,t:e,useStatus:2,force:!!this.statuParams.force,ban:!!this.statuParams.ban}}o["a"].changeSpeciaStu(t).then((function(t){200===t.code&&(a.isShowChange=!1,a.statuParams={reason:"",t:[],force:1,ban:1},a.searchList())}))},reset:function(){this.searchParams={name:"",phone:"",company:""},this.page={pageSize:10,pageNumber:1,total:0},this.searchList()},resetEdit:function(){this.formParams={roleIds:"",avatar:"https://xiaochengxu-dev.oss-cn-beijing.aliyuncs.com/202002/5e4a67c502643571c95f276f.jpeg"}},getRoles:function(){var t=this;i["a"].getAllRoles({size:9999}).then((function(a){200===a.code&&(t.rolesList=a.data.data,t.rolesList.map((function(a){"课程专家"===a.name&&(t.formParams.roleIds=a.id)})))}))},handleAvatarSuccess:function(t,a){200===t.code&&(this.formParams.avatar=t.data.url)},pageChange:function(t,a){this.page.pageSize=t,this.page.pageNumber=a,this.searchList()}},mounted:function(){this.searchList()}},f=m,p=e("5511"),d=Object(p["a"])(f,r,s,!1,null,"6a7c32b8",null);a["default"]=d.exports}}]);