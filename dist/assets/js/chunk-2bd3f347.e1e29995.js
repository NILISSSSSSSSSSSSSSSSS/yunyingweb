(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bd3f347"],{"289c":function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return r}))},"4ba2":function(e,t,a){var r=a("2ea2"),n=a("2f77"),o=a("69b3"),s=a("e7ad").Reflect;e.exports=s&&s.ownKeys||function(e){var t=r.f(o(e)),a=n.f;return a?t.concat(a(e)):t}},"5ab2":function(e,t,a){var r=a("e46b"),n=a("4ba2"),o=a("09b9"),s=a("dcb7"),i=a("ebc3");r(r.S,"Object",{getOwnPropertyDescriptors:function(e){var t,a,r=o(e),l=s.f,u=n(r),c={},d=0;while(u.length>d)a=l(r,t=u[d++]),void 0!==a&&i(c,t,a);return c}})},a6c2:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"mb20"},[a("el-form",{attrs:{model:e.searchParams,inline:"",labelWidth:"80px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"姓名",clearable:""},model:{value:e.searchParams.name,callback:function(t){e.$set(e.searchParams,"name","string"===typeof t?t.trim():t)},expression:"searchParams.name"}})],1),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{attrs:{placeholder:"电话",clearable:""},model:{value:e.searchParams.phone,callback:function(t){e.$set(e.searchParams,"phone","string"===typeof t?t.trim():t)},expression:"searchParams.phone"}})],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchList}},[e._v("搜索")]),a("el-button",{attrs:{type:"info",icon:"el-icon-s-tools"},on:{click:function(t){return e.searchList("reset")}}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.showDialog(1)}}},[e._v("新增客服")])],1)],1),a("el-card",[a("el-table",{attrs:{data:e.dataList,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("img",{staticStyle:{width:"20px","vertical-align":"middle","border-radius":"50%"},attrs:{src:r.avatar}}),e._v("\n          "+e._s(r.name)+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"loginId",label:"帐号",align:"center"}}),a("el-table-column",{attrs:{prop:"phone",label:"电话",align:"center"}}),a("el-table-column",{attrs:{prop:"group.name",label:"用户组",align:"center"}}),a("el-table-column",{attrs:{prop:"createT.humanTime",label:"创建时间",width:"170px",align:"center"}}),a("el-table-column",{attrs:{prop:"useStatus",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(1==a.useStatus?"启用":"停用")+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150px",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showDialog(r)}}},[e._v("编辑")]),1==r.useStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.closeStatus(r)}}},[e._v("停用")]):e._e(),2==r.useStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.openStatus(r)}}},[e._v("启用")]):e._e()]}}])})],1),a("pagination",{attrs:{pageLimit:e.page},on:{change:e.pageChange}})],1),a("el-dialog",{attrs:{visible:e.isShowDialog,title:e.dialogTitle,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShowDialog=t}}},[a("el-form",{attrs:{labelWidth:"80px",rules:e.rules,model:e.createParams}},[a("el-form-item",{attrs:{label:"登录名",prop:"loginId"}},[a("el-input",{attrs:{placeholder:"登录名",clearable:""},model:{value:e.createParams.loginId,callback:function(t){e.$set(e.createParams,"loginId","string"===typeof t?t.trim():t)},expression:"createParams.loginId"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"姓名",clearable:""},model:{value:e.createParams.name,callback:function(t){e.$set(e.createParams,"name","string"===typeof t?t.trim():t)},expression:"createParams.name"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{attrs:{placeholder:"电话",clearable:""},model:{value:e.createParams.phone,callback:function(t){e.$set(e.createParams,"phone","string"===typeof t?t.trim():t)},expression:"createParams.phone"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"desc"}},[a("el-input",{attrs:{placeholder:"描述",clearable:""},model:{value:e.createParams.desc,callback:function(t){e.$set(e.createParams,"desc","string"===typeof t?t.trim():t)},expression:"createParams.desc"}})],1),a("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.createParams.avatar?a("img",{staticClass:"avatar",attrs:{src:e.createParams.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"是否管理",prop:"manager"}},[a("el-select",{attrs:{clearable:""},model:{value:e.createParams.manager,callback:function(t){e.$set(e.createParams,"manager",t)},expression:"createParams.manager"}},e._l(e.managers,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"客服分组",prop:"groupId"}},[a("el-select",{attrs:{clearable:""},model:{value:e.createParams.groupId,callback:function(t){e.$set(e.createParams,"groupId",t)},expression:"createParams.groupId"}},e._l(e.kefuGroup,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1),a("i",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"15px","font-size":"20px",cursor:"pointer"},attrs:{size:"50"},on:{click:function(t){return e.openEditGroup()}}})],1),a("el-row",{staticClass:"tc"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.createKefu}},[e._v("保存")])],1)],1)],1),a("el-dialog",{attrs:{visible:e.editDialog,title:e.dialogTitle,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.editDialog=t}}},[a("el-form",{attrs:{labelWidth:"80px",rules:e.rules,model:e.editParams}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"姓名",clearable:""},model:{value:e.editParams.name,callback:function(t){e.$set(e.editParams,"name","string"===typeof t?t.trim():t)},expression:"editParams.name"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{attrs:{placeholder:"电话",clearable:""},model:{value:e.editParams.phone,callback:function(t){e.$set(e.editParams,"phone","string"===typeof t?t.trim():t)},expression:"editParams.phone"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"desc"}},[a("el-input",{attrs:{placeholder:"描述",clearable:""},model:{value:e.editParams.desc,callback:function(t){e.$set(e.editParams,"desc","string"===typeof t?t.trim():t)},expression:"editParams.desc"}})],1),a("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleAvatarEditSuccess,"before-upload":e.beforeAvatarUpload}},[e.editParams.avatar?a("img",{staticClass:"avatar",attrs:{src:e.editParams.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"是否管理",prop:"manager"}},[a("el-select",{model:{value:e.editParams.manager,callback:function(t){e.$set(e.editParams,"manager",t)},expression:"editParams.manager"}},e._l(e.managers,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"客服分组",prop:"groupId"}},[a("el-select",{model:{value:e.editParams.groupId,callback:function(t){e.$set(e.editParams,"groupId",t)},expression:"editParams.groupId"}},e._l(e.kefuGroup,(function(t,r){return t.adding?e._e():a("el-option",{key:r,attrs:{label:t.name,value:t.id}})})),1),a("i",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"15px","font-size":"20px",cursor:"pointer"},attrs:{size:"50"},on:{click:function(t){return e.openEditGroup()}}})],1),a("el-row",{staticClass:"tc"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.editKefu}},[e._v("保存")])],1)],1)],1),a("el-dialog",{attrs:{visible:e.editGroupDialog,title:"编辑分组",width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.editGroupDialog=t}}},[a("el-table",{attrs:{data:e.kefuGroup,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name","string"===typeof a?a.trim():a)},expression:"scope.row.name"}}):e._e(),t.row.edit?e._e():a("span",{domProps:{textContent:e._s(t.row.name)}})]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?e._e():a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.editGroup(t.$index)}}},[e._v("编辑")]),t.row.edit?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.saveGroup(t)}}},[e._v("保存")]):e._e(),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteGroup(t)}}},[e._v("删除")])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addGroup}},[e._v("添加")])],1)],1)],1)},n=[],o=(a("5ab2"),a("6d57"),a("e10e"),a("289c")),s=(a("cc57"),a("c12f")),i=a("a3be"),l=a("2ca7");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={data:function(){return{uploadUrl:i["a"].ossUpload||"",searchParams:{phone:"",name:""},kefuGroup:[],createParams:{loginId:"",phone:"",name:"",groupId:"",desc:"",manager:"",roleIds:"",avatar:""},rules:{loginId:[{required:!0,message:" ",trigger:"blur"}],name:[{required:!0,message:" ",trigger:"blur"}],phone:[{required:!0,message:" ",trigger:"blur"}],groupId:[{required:!0,message:" ",trigger:"blur"}],desc:[{required:!0,message:" ",trigger:"blur"}],manager:[{required:!0,message:" ",trigger:"blur"}],roleIds:[{required:!0,message:" ",trigger:"blur"}],avatar:[{required:!0,message:" ",trigger:"blur"}]},editParams:{loginId:"",phone:"",name:"",groupId:"",desc:"",manager:"",roleIds:"",avatar:""},dataList:[{id:"",userId:"",loginId:"",phone:"",name:"",avatar:"",desc:"",manager:"",useStatus:"",createT:{seconds:"",humanTime:""}}],managers:[{name:"否",value:!1},{name:"是",value:!0}],roleIds:[{name:"客服主管",value:"5df899ab306b88278926bdbe"},{name:"客服专员",value:"5df899b5306b88278926bdc1"}],isShowDialog:!1,editDialog:!1,editGroupDialog:!1,dialogTitle:"新增客服",imageUrl:"",page:{pageSize:10,pageNumber:1,total:0}}},mounted:function(){this.searchList(),this.kefuGroupList()},methods:{deleteGroup:function(e){var t=this,a={queryParam:e.row.id};s["a"].deleteKefuGroup(a).then((function(e){200===e.code&&t.kefuGroupList()}))},addGroup:function(){this.kefuGroup[this.kefuGroup.length-1].adding||this.kefuGroup.push({name:"",edit:!0,adding:!0})},saveGroup:function(e){var t=this;if(console.log(e.row),e.row.adding){var a={name:e.row.name};s["a"].addKefuGroup(a).then((function(e){200===e.code&&t.kefuGroupList()}))}else{var r={queryParam:e.row.id,name:e.row.name};s["a"].editKefuGroup(r).then((function(e){200===e.code&&t.kefuGroupList()}))}},editGroup:function(e){this.$set(this.kefuGroup[e],"edit",!0),console.log(this.kefuGroup[e])},openEditGroup:function(){this.editGroupDialog=!0},closeStatus:function(e){var t=this,a={queryParam:e.id,userId:e.userId,useStatus:2,force:!1,ban:!1};s["a"].statusKefu(a).then((function(e){200===e.code&&t.searchList()}))},openStatus:function(e){var t=this,a={queryParam:e.id,userId:e.userId,useStatus:1,force:!1,ban:!1};s["a"].statusKefu(a).then((function(e){200===e.code&&t.searchList()}))},searchList:function(e){var t=this;"reset"==e&&(this.searchParams={phone:"",name:""});var a=c({},this.searchParams,{page:this.page.pageNumber,size:this.page.pageSize,isall:!0});s["a"].kefulist(a).then((function(e){200===e.code&&(t.dataList=e.data.data,t.page.total=e.data.total)}))},kefuGroupList:function(){var e=this,t={page:1,size:1e6};s["a"].kefuGroup(t).then((function(t){200===t.code&&(e.kefuGroup=t.data.data)}))},showDialog:function(e){1===e?(this.isShowDialog=!0,this.dialogTitle="新增客服"):(this.editParams=e,this.editParams.queryParam=e.id,this.editDialog=!0,this.dialogTitle="编辑客服")},handleAvatarEditSuccess:function(e,t){this.editParams.avatar=e.data.url},handleAvatarSuccess:function(e,t){this.createParams.avatar=e.data.url},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},createKefu:function(){var e=this,t=(this.createParams.roleIds,c({},this.createParams));return t.loginId?t.name?t.phone?t.desc?t.avatar?""===t.manager?(Object(l["Message"])({message:"请选择管理",type:"error"}),!1):t.groupId?(t.roleIds=[],t.roleIds.push("5df899ab306b88278926bdbe"),void s["a"].addKefu(t).then((function(t){200===t.code&&(e.isShowDialog=!1,e.searchList(),e.createParams={loginId:"",phone:"",name:"",groupId:"",desc:"",manager:"",roleIds:"",avatar:""})}))):(Object(l["Message"])({message:"请选择组",type:"error"}),!1):(Object(l["Message"])({message:"请上传头像",type:"error"}),!1):(Object(l["Message"])({message:"请输入描述",type:"error"}),!1):(Object(l["Message"])({message:"请输入电话",type:"error"}),!1):(Object(l["Message"])({message:"请输入姓名",type:"error"}),!1):(Object(l["Message"])({message:"请输入登录名",type:"error"}),!1)},editKefu:function(){var e=this,t=(this.createParams.roleIds,c({},this.editParams));return t.roleIds=[],t.roleIds.push("5df899ab306b88278926bdbe"),t.loginId?t.name?t.phone?t.desc?t.avatar?""===t.manager?(Object(l["Message"])({message:"请选择管理",type:"error"}),!1):t.groupId?void s["a"].editKefu(t).then((function(t){200===t.code&&(e.editDialog=!1,e.searchList())})):(Object(l["Message"])({message:"请选择组",type:"error"}),!1):(Object(l["Message"])({message:"请上传头像",type:"error"}),!1):(Object(l["Message"])({message:"请输入描述",type:"error"}),!1):(Object(l["Message"])({message:"请输入电话",type:"error"}),!1):(Object(l["Message"])({message:"请输入姓名",type:"error"}),!1):(Object(l["Message"])({message:"请输入登录名",type:"error"}),!1)},pageChange:function(e,t){this.page.pageSize=e,this.page.pageNumber=t,this.searchList()}}},p=d,m=a("5511"),f=Object(m["a"])(p,r,n,!1,null,"7a951d3b",null);t["default"]=f.exports},c12f:function(e,t,a){"use strict";var r=a("a3be"),n=a("c7e8");function o(e,t){return n["a"].Get(r["a"].kefu,e,t)}function s(e,t){return n["a"].Post(r["a"].addKefu,e,t)}function i(e,t){return n["a"].Put(r["a"].byIdedietKefu,e,t)}function l(e,t){return n["a"].Get(r["a"].kefuGroup,e,t)}function u(e,t){return n["a"].Put(r["a"].editKefu,e,t)}function c(e,t){return n["a"].Put(r["a"].statusKefu,e,t)}function d(e,t){return n["a"].Post(r["a"].addKefuGroup,e,t)}function p(e,t){return n["a"].Put(r["a"].editKefuGroup,e,t)}function m(e,t){return n["a"].Del(r["a"].deleteKefuGroup,e,t)}t["a"]={kefulist:o,addKefu:s,byIdedietKefu:i,kefuGroup:l,editKefu:u,statusKefu:c,addKefuGroup:d,editKefuGroup:p,deleteKefuGroup:m}},c7e8:function(e,t,a){"use strict";var r=a("a59a");function n(e,t,a){if(t){var n="?";for(var o in t)n=n+o+"="+t[o]+"&";return n=n.substr(0,n.length-1),a&&0==a.loading?new Promise((function(t,a){r["default"].prototype.$ajax.get(e+n,{loading:!1}).then((function(e){t(e.data)}),(function(e){a(e)}))})):new Promise((function(t,a){r["default"].prototype.$ajax.get(e+n).then((function(e){t(e.data)}),(function(e){a(e)}))}))}return new Promise((function(t,a){r["default"].prototype.$ajax.get(e).then((function(e){t(e.data)}),(function(e){a(e)}))}))}function o(e,t,a){return a&&0==a.loading?new Promise((function(a,n){r["default"].prototype.$ajax.get(e+t.queryParam,{params:t},{loading:!1}).then((function(e){a(e.data)}),(function(e){n(e)}))})):new Promise((function(a,n){r["default"].prototype.$ajax.get(e+t.queryParam,{params:t}).then((function(e){a(e.data)}),(function(e){n(e)}))}))}function s(e,t,a){return a&&0==a.loading?new Promise((function(a,n){r["default"].prototype.$ajax.post(e,t,{loading:!1}).then((function(e){a(e.data)})).catch((function(e){n(e.data)}))})):new Promise((function(a,n){r["default"].prototype.$ajax.post(e,t).then((function(e){a(e.data)})).catch((function(e){n(e.data)}))}))}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return a&&a.loading,new Promise((function(a,n){r["default"].prototype.$ajax.put(e+t.queryParam,t).then((function(e){a(e.data)}),(function(e){n(e)}))}))}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(t){var n="";for(var o in t)n=n+t[o]+"/";return n=n.substring(0,n.length-1),a&&a.loading,new Promise((function(a,o){r["default"].prototype.$ajax.put(e+n,t).then((function(e){a(e.data)}),(function(e){o(e)}))}))}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return a&&a.loading,new Promise((function(a,n){r["default"].prototype.$ajax.delete(e+t.queryParam,{data:t}).then((function(e){a(e.data)})).catch((function(e){n(e.data)}))}))}t["a"]={Get:n,Get2:o,Post:s,Put:i,Put2:l,Del:u}},ebc3:function(e,t,a){"use strict";var r=a("064e"),n=a("cc33");e.exports=function(e,t,a){t in e?r.f(e,t,n(0,a)):e[t]=a}}}]);