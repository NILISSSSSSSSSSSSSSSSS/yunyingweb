(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22bf61"],{f0cd:function(t,e,a){"use strict";a.r(e);var r,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"mb20"},[a("el-row",{staticClass:"mb20 ft12"},[t._v("话术信息")]),a("el-form",{staticClass:"normal-form",attrs:{model:t.formParams,labelWidth:"80px"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"标题",clearable:""},model:{value:t.formParams.name,callback:function(e){t.$set(t.formParams,"name","string"===typeof e?e.trim():e)},expression:"formParams.name"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"描述",rows:"3",clearable:""},model:{value:t.formParams.desc,callback:function(e){t.$set(t.formParams,"desc",e)},expression:"formParams.desc"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.id,expression:"id"}]},[a("el-row",{staticClass:"mb20 ft12"},[t._v("\n      话术内容\n      ")]),a("el-row",{staticClass:"mb20"},[a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){t.dialogWordData.isShow=!0}}},[t._v("上传文字")]),a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){t.dialogImgData.isShow=!0}}},[t._v("上传图片/音频/视频")]),a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:t.deleteMore}},[t._v("删除所选")]),a("span",{staticClass:"tips"},[t._v("表格可拖动排序 ↓ 排序后点击下方保存排序")])],1),a("el-table",{attrs:{data:t.formParams.items,border:"",stripe:"","row-key":"id"},on:{"selection-change":t.getNowRow}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),a("el-table-column",{attrs:{type:"index",label:"编号",align:"center",width:"60px"}}),a("el-table-column",{attrs:{prop:"title",label:"文件名",align:"center",width:"200px"}}),a("el-table-column",{attrs:{type:"type",label:"类型",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("div",[t._v(t._s(t._f("courseType")(r.type)))])]}}])}),a("el-table-column",{attrs:{type:"content",label:"内容",align:"center","min-width":"300px"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return["IMAGE"===r.type?a("img",{staticStyle:{"max-width":"100px","max-height":"50px"},attrs:{src:r.content,alt:""}}):"TEXT"===r.type?a("div",[t._v("\n              "+t._s(r.content)+"\n            ")]):"VOICE"===r.type?a("audio",{staticStyle:{width:"260px"},attrs:{src:r.content,controls:""}}):"VIDEO"===r.type?a("video",{staticStyle:{width:"180px"},attrs:{src:r.content,controls:""}}):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.$index;return[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.deleteRows(r)}}},[t._v("删除")])]}}])})],1),a("el-row",{staticClass:"mt20 ft12"},[t._v("共"+t._s(t.formParams.items.length)+"条")])],1),a("el-row",{staticClass:"tc mt20"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.save}},[t._v("保存信息/排序")])],1)],1),a("chooseSpecial",{attrs:{dialogData:t.dialogSpecialData}}),a("addWord",{attrs:{dialogData:t.dialogWordData,itemId:t.id},on:{closeWord:t.closeWord}}),a("addImg",{attrs:{dialogData:t.dialogImgData,itemId:t.id},on:{closeImg:t.closeWord}})],1)},i=[],o=(a("5ab2"),a("6d57"),a("e10e"),a("0bbb")),n=a("289c"),c=(a("cc57"),a("a59a")),l=a("e182"),d=a("7cda"),m=a("a2b2"),u=a("2480"),f=a("08ce");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h=JSON.parse(c["default"].cookie.get("userInfo"))||{},v={components:{chooseSpecial:l["a"],addWord:d["a"],addImg:m["a"]},data:function(){return{id:this.$route.query.id||"",formParams:{name:"",desc:"",items:[],creator:{userId:h.id,name:h.name,avatar:h.avatar}},activeName:"first",nowCourseList:[],selectedList:[],unSaveVerbalList:[],dialogSpecialData:{isShow:!1},dialogWordData:{isShow:!1,type:"verbal"},dialogImgData:{isShow:!1,type:"verbal"}}},methods:(r={save:function(){var t=this;if(!this.formParams.name.length||!this.formParams.desc.length)return this.$message.error("标题及描述必填~"),!1;var e=this.nowCourseList.concat(this.unSaveVerbalList),a=b({},this.formParams,{items:e});""===this.id?f["a"].addVerbalTrick(a).then((function(a){200===a.code&&(t.$message.success(a.msg||"新增话术成功"),t.unSaveVerbalList=[],t.id=a.data.id,e.length&&t.$router.push("/verbalTrick"))})):(a.queryParam=this.id,f["a"].editVerbalTrick(a).then((function(e){200===e.code&&(t.$message.success(e.msg||"编辑话术成功"),t.unSaveVerbalList=[],t.getVerbalDetail(),t.$router.push("/verbalTrick"))})))},getVerbalDetail:function(){var t=this,e={queryParam:this.id};f["a"].verbalTrickDetail(e).then((function(e){200===e.code&&(t.formParams={name:e.data.name,desc:e.data.desc,items:e.data.items,id:e.data.id,creator:e.data.creator},t.nowCourseList=Object(o["a"])(e.data.items))}))},deleteRows:function(t){var e=this;this.$confirm("确定删除编号为【"+(t+1)+"】的话术？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.formParams.items.splice(t,1),e.save()})).catch((function(){e.$message.info("已取消")}))},closeWord:function(t){t.length&&(this.unSaveVerbalList=[].concat(Object(o["a"])(this.unSaveVerbalList),Object(o["a"])(t)),this.save())},getNowRow:function(t){var e=this._.differenceWith(this.formParams.items,t,_.isEqual);this.selectedList=Object(o["a"])(t),this.nowCourseList=Object(o["a"])(e)},deleteMore:function(){if(!this.selectedList.length)return this.$message.error("还未选择话术无法删除"),!1;this.save()}},Object(n["a"])(r,"deleteRows",(function(t){var e=this;this.$confirm("确定删除编号为【"+(t+1)+"】的课件？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.nowCourseList.splice(t,1),e.save()})).catch((function(){e.$message.info("已取消")}))})),Object(n["a"])(r,"drag",(function(){var t=document.querySelector(".el-table__body-wrapper tbody"),e=this;u["a"].create(t,{onEnd:function(t){var a=t.newIndex,r=t.oldIndex,s=e.formParams.items.splice(r,1)[0];e.formParams.items.splice(a,0,s),e.nowCourseList=Object(o["a"])(e.formParams.items)}})})),r),mounted:function(){this.drag(),this.id&&this.getVerbalDetail()}},g=v,w=a("5511"),y=Object(w["a"])(g,s,i,!1,null,"3df18dc8",null);e["default"]=y.exports}}]);