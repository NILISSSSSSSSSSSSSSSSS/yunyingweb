(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e944a840"],{"265f":function(n,t,e){"use strict";var a=e("80c7"),s=e.n(a);s.a},"5a26":function(n,t,e){t=n.exports=e("690e")(!0),t.push([n.i,"[data-v-5ac5034d] .doctor .el-card__body{padding:10px!important}.tx-avatar[data-v-5ac5034d]{width:50px;max-height:50px;border-radius:50%;vertical-align:middle}.my-avatar[data-v-5ac5034d],[data-v-5ac5034d] .el-upload-list--picture-card .el-upload-list__item{width:100px;height:100px}.my-avatar[data-v-5ac5034d]{margin:10px 10px 0 0;border-radius:5px}","",{version:3,sources:["C:/小甘项目/yunyingweb/src/views/courseware/C:/小甘项目/yunyingweb/src/views/courseware/C:/小甘项目/yunyingweb/src/views/courseware/C:/小甘项目/yunyingweb/src/views/courseware/coursewareAdd.vue?vue&type=style&index=0&id=5ac5034d&lang=less&scoped=true&","C:/小甘项目/yunyingweb/src/views/courseware/C:/小甘项目/yunyingweb/src/views/courseware/C:/小甘项目/yunyingweb/src/views/courseware/coursewareAdd.vue"],names:[],mappings:"AA2UA,yCACE,sBC1UF,CD4UA,4BACE,WACA,gBACA,kBACA,qBC1UF,CDgVA,kGAHE,YACA,YCpUF,CDsUA,4BAGE,qBACA,iBC1UF,CAAA",file:"coursewareAdd.vue?vue&type=style&index=0&id=5ac5034d&lang=less&scoped=true&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/deep/.doctor .el-card__body{\n  padding: 10px!important;\n}\n.tx-avatar{\n  width:50px;\n  max-height: 50px;\n  border-radius: 50%;\n  vertical-align: middle;\n}\n/deep/.el-upload-list--picture-card .el-upload-list__item{\n  width: 100px;\n  height: 100px;\n}\n.my-avatar{\n  width: 100px;\n  height: 100px;\n  margin: 10px 10px 0 0;\n  border-radius: 5px;\n}\n"," /deep/ .doctor .el-card__body {\n  padding: 10px!important;\n}\n.tx-avatar {\n  width: 50px;\n  max-height: 50px;\n  border-radius: 50%;\n  vertical-align: middle;\n}\n /deep/ .el-upload-list--picture-card .el-upload-list__item {\n  width: 100px;\n  height: 100px;\n}\n.my-avatar {\n  width: 100px;\n  height: 100px;\n  margin: 10px 10px 0 0;\n  border-radius: 5px;\n}\n"],sourceRoot:""}])},"80c7":function(n,t,e){var a=e("5a26");"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var s=e("85cb").default;s("01ae6c90",a,!0,{sourceMap:!0,shadowMode:!1})},e8da:function(n,t,e){"use strict";e.r(t);var a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("el-card",{},[e("el-tabs",{staticClass:"my-tabs",attrs:{stretch:!0},model:{value:n.activeName,callback:function(t){n.activeName=t},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[e("el-form",{staticClass:"normal-form",attrs:{model:n.formParams,labelWidth:"120px"}},[e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{staticClass:"w600",attrs:{placeholder:"标题",size:"small",clearable:""},model:{value:n.formParams.title,callback:function(t){n.$set(n.formParams,"title","string"===typeof t?t.trim():t)},expression:"formParams.title"}})],1),e("el-form-item",{attrs:{label:"描述"}},[e("el-input",{staticClass:"w600",attrs:{type:"textarea",placeholder:"描述",size:"small",clearable:""},model:{value:n.formParams.subTitle,callback:function(t){n.$set(n.formParams,"subTitle",t)},expression:"formParams.subTitle"}})],1),e("el-form-item",{attrs:{label:"上传封面图片"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:n.uploadUrl,"show-file-list":!1,accept:"image/*","on-success":function(t,e){return n.handleAvatarSuccess("fm",e)}}},[n.formParams.headImg?e("img",{staticClass:"avatar",attrs:{src:n.formParams.headImg}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",{attrs:{label:"上传详情图片"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:n.uploadUrl,"show-file-list":!1,accept:"image/*","on-success":function(t,e){return n.handleAvatarSuccess("desc",e)}}},[n.formParams.imgDesc?e("img",{staticClass:"avatar",attrs:{src:n.formParams.imgDesc}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",{attrs:{label:"上传轮播图"}},[e("el-upload",{ref:"upload",attrs:{action:n.uploadUrl,"list-type":"picture-card","on-success":function(t,e){return n.handleAvatarSuccess("banner",e)},"show-file-list":!0,accept:"image/*"}},[e("i",{staticClass:"el-icon-plus"})]),n.hasImgList.length?e("div",[e("el-row",{staticClass:"tips"},[n._v("现有图片:")]),n._l(n.hasImgList,(function(n,t){return e("img",{key:t,staticClass:"my-avatar mt10 mr10",attrs:{src:n}})}))],2):n._e()],1),e("el-form-item",{attrs:{label:"开课专家"}},[e("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){n.dialogSpecialData.isShow=!0}}},[n._v("选择开课专家")]),n.doctor.id?e("div",{staticClass:"tips"},[n._v("已选专家：")]):n._e(),n.doctor.id?e("el-card",{staticClass:"doctor",staticStyle:{width:"400px"}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:5}},[n.doctor.avatar?e("img",{staticClass:"tx-avatar",attrs:{src:n.doctor.avatar}}):n._e()]),e("el-col",{attrs:{span:17}},[e("div",[n._v("姓名："+n._s(n.doctor.name))]),e("div",[n._v("医院："+n._s(n.doctor.company))]),e("div",[n._v("电话："+n._s(n.doctor.phone))])])],1)],1):n._e()],1)],1),e("el-row",{staticClass:"bor-top tr"},[e("el-button",{attrs:{type:"warning"},on:{click:n.saveInfo}},[n._v("↓保存，去下一步")])],1)],1),e("el-tab-pane",{attrs:{label:"课件列表",name:"second"}},[e("el-row",{staticClass:"mb20"},[e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){n.dialogWordData.isShow=!0}}},[n._v("上传文字")]),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){n.dialogImgData.isShow=!0}}},[n._v("上传图片/音频/视频")]),e("el-button",{attrs:{type:"info",plain:""},on:{click:n.deleteMore}},[n._v("删除所选")]),e("span",{staticClass:"tips"},[n._v("表格可拖动排序 ↓ 排序后点击右下角保存排序")])],1),e("el-table",{attrs:{data:n.courseList,border:"",stripe:"","row-key":"id"},on:{"selection-change":n.getNowRow}},[e("el-table-column",{attrs:{type:"selection",align:"center"}}),e("el-table-column",{attrs:{type:"index",label:"编号",align:"center",width:"60px"}}),e("el-table-column",{attrs:{prop:"title",label:"文件名",align:"center"}}),e("el-table-column",{attrs:{type:"type",label:"类型",align:"center",width:"100px"},scopedSlots:n._u([{key:"default",fn:function(t){var a=t.row;return[e("div",[n._v(n._s(n._f("courseType")(a.type)))])]}}])}),e("el-table-column",{attrs:{type:"content",label:"内容",align:"center","min-width":"300px"},scopedSlots:n._u([{key:"default",fn:function(t){var a=t.row;return["IMAGE"===a.type?e("img",{staticStyle:{"max-width":"100px","max-height":"50px"},attrs:{src:a.content,alt:""}}):"TEXT"===a.type?e("div",[n._v(n._s(a.content))]):"VOICE"===a.type?e("audio",{staticStyle:{width:"260px"},attrs:{src:a.content,controls:""}}):"VIDEO"===a.type?e("video",{staticStyle:{width:"180px"},attrs:{src:a.content,controls:""}}):n._e()]}}])}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"100px"},scopedSlots:n._u([{key:"default",fn:function(t){var a=t.$index;return[e("el-button",{attrs:{type:"text"},on:{click:function(t){return n.deleteRows(a)}}},[n._v("删除")])]}}])})],1),e("el-row",{staticClass:"mt20 ft12"},[n._v("共"+n._s(n.courseList.length)+"条")]),e("el-row",{staticClass:"bor-top tr"},[e("el-button",{attrs:{type:"warning"},on:{click:function(t){n.activeName="first"}}},[n._v("↑ 基本信息")]),e("el-button",{attrs:{type:"primary"},on:{click:n.saveSort}},[n._v("保存排序")])],1)],1)],1)],1),e("chooseSpecial",{attrs:{dialogData:n.dialogSpecialData},on:{saveSpecia:n.saveSpecia}}),e("addWord",{attrs:{dialogData:n.dialogWordData,itemId:n.courseId},on:{closeWord:n.closeWord}}),e("addImg",{attrs:{dialogData:n.dialogImgData,itemId:n.courseId},on:{closeImg:n.closeWord}})],1)},s=[],r=(e("5ab2"),e("6d57"),e("e10e"),e("0bbb")),i=e("289c"),o=e("e182"),c=e("7cda"),l=e("a2b2"),d=e("2480"),u=e("08ce"),p=e("a3be");function m(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,a)}return e}function h(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?m(Object(e),!0).forEach((function(t){Object(i["a"])(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):m(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var g={components:{chooseSpecial:o["a"],addWord:c["a"],addImg:l["a"]},data:function(){return{uploadUrl:p["a"].ossUpload||"",courseId:this.$route.query.id||"",formParams:{headImg:"",imgDesc:"",rollImgs:[]},hasImgList:[],nowImgList:[],doctor:{},activeName:"first",courseList:[],nowCourseList:[],selectedList:[],page:{pageSize:10,pageNumber:1,total:0},dialogSpecialData:{isShow:!1},dialogWordData:{isShow:!1,courseList:this.courseList},dialogImgData:{isShow:!1,courseList:this.courseList}}},methods:{saveInfo:function(){var n=this;if(!this.formParams.title||!this.doctor.id)return this.$message.error("课件标题和专家不能为空~"),!1;this.formParams.rollImgs=this.nowImgList.concat(this.hasImgList);var t=h({},this.formParams,{doctorId:this.doctor.id});this.courseId?(t.queryParam=this.courseId,u["a"].editCourse(t).then((function(t){200===t.code&&(n.$message.success(t.msg||"保存信息成功~"),n.getDetail(),n.activeName="second")}))):u["a"].addCourse(t).then((function(t){200===t.code&&(n.$message.success(t.msg||"保存信息成功~"),n.courseId=t.data.id,n.getDetail(),n.activeName="second")}))},deleteMore:function(){if(!this.selectedList.length)return this.$message.error("还未选择课件无法删除"),!1;this.updateCourse()},deleteRows:function(n){var t=this;this.$confirm("确定删除编号为【"+(n+1)+"】的课件？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.nowCourseList.splice(n,1),t.updateCourse()})).catch((function(){t.$message.info("已取消")}))},updateCourse:function(){var n=this,t=[];t=t.concat(this.nowCourseList),t.queryParam=this.courseId,u["a"].courseItem(t).then((function(t){200===t.code&&(n.$message.success(t.msg||"更新课件成功"),n.getDetail())}))},saveSpecia:function(n){n&&(this.doctor=n)},getNowRow:function(n){var t=this._.differenceWith(this.courseList,n,_.isEqual);this.selectedList=Object(r["a"])(n),this.nowCourseList=Object(r["a"])(t)},handleAvatarSuccess:function(n,t){if(200===t.response.code){var e=t.response.data;"fm"===n?this.formParams.headImg=e.url:"desc"===n?this.formParams.imgDesc=e.url:"banner"===n&&this.nowImgList.push(e.url)}},closeWord:function(n){n&&this.getDetail()},saveSort:function(){this.nowCourseList=Object(r["a"])(this.courseList),this.updateCourse(),this.$router.push("/coursewareBase")},drag:function(){var n=document.querySelector(".el-table__body-wrapper tbody"),t=this;d["a"].create(n,{onEnd:function(n){var e=n.newIndex,a=n.oldIndex,s=t.courseList.splice(a,1)[0];t.courseList.splice(e,0,s)}})},pageChange:function(n,t){this.page.pageSize=n,this.page.pageNumber=t,this.searchList()},getDetail:function(){var n=this;if(""!==this.courseId){var t={queryParam:this.courseId};u["a"].courseDetail(t).then((function(t){if(200===t.code){n.courseList=[];var e=t.data;delete e.createT,delete e.updateT,n.hasImgList=e.rollImgs,delete e.rollImgs,n.formParams=h({},e),n.doctor=e.doctor,t.data.items.map((function(t){n.courseList.push({id:t.id,content:t.content,title:t.title,length:t.length,type:t.type})})),n.dialogWordData.courseList=Object(r["a"])(n.courseList),n.dialogImgData.courseList=Object(r["a"])(n.courseList),n.nowCourseList=Object(r["a"])(n.courseList)}}))}}},mounted:function(){this.drag(),this.getDetail()},watch:{}},f=g,v=(e("265f"),e("5511")),b=Object(v["a"])(f,a,s,!1,null,"5ac5034d",null);t["default"]=b.exports}}]);